import { Proposed, NotificationHandler1, Event, LSPObject, DocumentUri } from 'vscode-languageserver-protocol';
import type { Feature, _Notebooks, _Connection, _ } from './server';
import { TextDocuments, TextDocumentsConfiguration } from './textDocuments';
/**
 * Shape of the notebooks feature
 *
 * @since 3.17.0 - proposed state
 */
export interface NotebooksFeatureShape {
    synchronization: {
        onDidOpenNotebookDocument(handler: NotificationHandler1<Proposed.DidOpenNotebookDocumentParams>): void;
        onDidChangeNotebookDocument(handler: NotificationHandler1<Proposed.DidChangeNotebookDocumentParams>): void;
        onDidSaveNotebookDocument(handler: NotificationHandler1<Proposed.DidSaveNotebookDocumentParams>): void;
        onDidCloseNotebookDocument(handler: NotificationHandler1<Proposed.DidCloseNotebookDocumentParams>): void;
    };
}
export declare const NotebooksFeature: Feature<_Notebooks, NotebooksFeatureShape>;
export declare type NotebookDocumentChangeEvent = {
    /**
     * The notebook document that changed.
     */
    notebookDocument: Proposed.NotebookDocument;
    /**
     * The meta data change if any.
     */
    metadata?: {
        old: LSPObject | undefined;
        new: LSPObject | undefined;
    };
    /**
     * The cell changes if any.
     */
    cells?: {
        added: Proposed.NotebookCell[];
        removed: Proposed.NotebookCell[];
        changed: {
            old: Proposed.NotebookCell;
            new: Proposed.NotebookCell;
        }[];
        contentChanged: Proposed.NotebookCell[];
    };
};
export declare class Notebooks<T extends {
    uri: DocumentUri;
}> {
    private readonly notebookDocuments;
    private readonly notebookCellMap;
    private readonly _onDidOpen;
    private readonly _onDidSave;
    private readonly _onDidChange;
    private readonly _onDidClose;
    private _cellTextDocuments;
    constructor(configuration: TextDocumentsConfiguration<T>);
    get cellTextDocuments(): TextDocuments<T>;
    getCellTextDocument(cell: Proposed.NotebookCell): T | undefined;
    getNotebookDocument(uri: DocumentUri): Proposed.NotebookDocument | undefined;
    getNotebookCell(uri: DocumentUri): Proposed.NotebookCell | undefined;
    findNotebookDocumentForCell(cell: DocumentUri | Proposed.NotebookCell): Proposed.NotebookDocument | undefined;
    get onDidOpen(): Event<Proposed.NotebookDocument>;
    get onDidSave(): Event<Proposed.NotebookDocument>;
    get onDidChange(): Event<NotebookDocumentChangeEvent>;
    get onDidClose(): Event<Proposed.NotebookDocument>;
    /**
     * Listens for `low level` notification on the given connection to
     * update the notebook documents managed by this instance.
     *
     * Please note that the connection only provides handlers not an event model. Therefore
     * listening on a connection will overwrite the following handlers on a connection:
     * `onDidOpenNotebookDocument`, `onDidChangeNotebookDocument`, `onDidSaveNotebookDocument`,
     *  and `onDidCloseNotebookDocument`.
     *
     * @param connection The connection to listen on.
     */
    listen(connection: _Connection<_, _, _, _, _, _, _, NotebooksFeatureShape>): void;
    private updateCellMap;
}
